# configuration file generated by Ansible
#SPDX-License-Identifier: MIT-0

# Variables
set $mod {{ sway_key_mod }}
set $term {{ sway_terminal }}
set $menu {{ sway_menu }}
set $rofi_cmd {{ sway_command_rofi }}

# Idle
exec swayidle -w \
    timeout {{ sway_idle_time }} 'swaylock --image {{ sway_image_lock }} --scaling fill' \
    before-sleep 'swaylock --image {{ sway_image_lock }} --scaling fill'

# Output configuration
{% if sway_outputs %}
{% for output in sway_outputs %}
output {{ output.name }} {
{% if output.adaptive_sync is defined %}
    adaptive_sync {{ 'on' if output.adaptive_sync else 'off' }}
{% endif %}
{% if output.background_image is defined %}
{% if output.background_fallback_color is defined %}
    background "{{ output.background_image }}" {{ output.background_image_mode | default("fill") }} {{ output.background_fallback_color }}
{% else %}
    background "{{ output.background_image }}" {{ output.background_image_mode | default("fill") }}
{% endif %}
{% elif output.background_color is defined  %}
    background "{{ output.background_color }}" solid_color
{% endif %}
{% if output.disable is defined and output.disable %}
    disable
{% endif %}
{% if output.color_profile is defined %}
    color_profile "{{ output.color_profile }}"
{% endif %}
{% if output.mode is defined %}
    mode "{{ output.mode }}"
{% endif %}
{% if output.position is defined %}
    position {{ output.position }}
{% endif %}
{% if output.render_bit_depth is defined %}
    render_bit_depth "{{ output.render_bit_depth }}"
{% endif %}
{% if output.scale is defined %}
    scale {{ output.scale }}
{% endif %}
{% if output.scale_filter is defined %}
    scale_filter {{ output.scale_filter }}
{% endif %}
{% if output.subpixel is defined %}
    subpixel "{{ output.subpixel }}"
{% endif %}
{% if output.transform is defined %}
    transform "{{ output.transform }}"
{% endif %}
}
{% endfor %}
{% endif %}

# Input configuration
{% if sway_inputs %}
{% for input in sway_inputs %}
input "{{ input.identifier }}" {
{% if input.accel_profile is defined %}
    accel_profile "{{ input.accel_profile }}"
{% endif %}
{% if input.drag is defined %}
    drag {{ 'enabled' if input.drag else 'disabled' }}
{% endif %}
{% if input.drag_lock is defined %}
    drag_lock {{ 'enabled' if input.drag_lock else 'disabled' }}
{% endif %}
{% if input.dwt is defined %}
    dwt {{ 'enabled' if input.dwt else 'disabled' }}
{% endif %}
{% if input.dwtp is defined %}
    dwtp {{ 'enabled' if input.dwtp else 'disable' }}
{% endif %}
{% if input.left_handed is defined %}
    left_handed {{ 'enabled' if input.left_handed else 'disabled' }}
{% endif %}
{% if input.natural_scroll is defined %}
    natural_scroll "{{ 'enabled' if input.natural_scroll else 'disabled' }}
{% endif %}
{% if input.pointer_accel is defined %}
    pointer_accel "{{ input.pointer_accel }}"
{% endif %}
{% if input.repeat_rate is defined %}
    repeat_rate "{{ input.repeat_rate }}"
{% endif %}
{% if input.repeat_delay is defined %}
    repeat_delay "{{ input.repeat_delay }}"
{% endif %}
{% if input.scroll_button is defined %}
    scroll_button "{{ input.scroll_button }}"
{% endif %}
{% if input.scroll_method is defined %}
    scroll_method "{{ input.scroll_method }}"
{% endif %}
{% if input.tap is defined %}
    tap {{ 'enabled' if input.tap else 'disabled' }}
{% endif %}
{% if input.tap_button_map is defined %}
    tap_button_map "{{ input.tap_button_map }}"
{% endif %}
{% if input.xkb_file is defined %}
    xkb_file "{{ input.xkb_file }}
{% endif %}
{% if input.xkb_capslock is defined %}
    xkb_capslock "{{ 'enable' if input.xkb_capslock else 'disable' }}
{% endif %}
{% if input.xkb_layout is defined %}
    xkb_layout "{{ input.xkb_layout }}"
{% endif %}
{% if input.xkb_model is defined %}
    xkb_model "{{ input.xkb_model }}"
{% endif %}
{% if input.xkb_numlock is defined %}
    xkb_numlock "{{ 'enable' if input.xkb_numlock else 'disable' }}"
{% endif %}
{% if input.xkb_options is defined %}
    xkb_options "{{ input.xkb_options }}"
{% endif %}
{% if input.xkb_rules is defined %}
    xkb_rules "{{ input.xkb_rules }}"
{% endif %}
{% if input.xkb_switch_layout is defined %}
    xkb_switch_layout "{{ input.xkb_switch_layout }}"
{% endif %}
{% if input.xkb_variant is defined %}
    xkb_variant "{{ input.xkb_variant }}"
{% endif %}
}
{% endfor %}
{% endif %}

# Seat configuration
{% if sway_seats %}
{% for seat in sway_seats %}
seat {{ seat.name }} {
{% if seat.fallback is defined %}    fallback {{ 'true' if seat.fallback else 'false' }}{% endif %}
{% if seat.cursor is defined %}    cursor {{ seat.cursor }}{% endif %}
{% if seat.hide_cursor_when_typing is defined %}    hide_cursor_when_typing {{ 'enabled' if seat.hide_cursor_when_typing else 'disabled' }}{% endif %}
}
{% endfor %}
{% endif %}

# Window configuration
{% if sway_window_border is defined and sway_window_border is not none %}
{% if sway_window_titlebar is defined and sway_window_titlebar %}
default_border normal {{ sway_window_border }}
{% else %}
default_border pixel {{ sway_window_border }}
{% endif %}
{% endif %}
{% if sway_window_floating_border is defined and sway_window_floating_border is not none %}
{% if sway_window_floating_titlebar is defined and sway_window_floating_titlebar %}
default_floating_border normal {{ sway_window_floating_border }}
{% else %}
default_floating_border pixel {{ sway_window_floating_border }}
{% endif %}
{% endif %}
{% if sway_window_hide_edge_borders_when_only is defined and sway_window_hide_edge_borders_when_only %}
hide_edge_borders smart_no_gaps
{% elif sway_window_hide_edge_borders_smart is defined and sway_window_hide_edge_borders_smart %}
hide_edge_borders smart
{% elif sway_window_hide_edge_borders is defined and sway_window_hide_edge_borders is not none %}
hide_edge_borders {{ sway_window_hide_edge_borders }}
{% endif %}

# Gaps
{% if sway_gaps_inner is defined %}
gaps inner {{ sway_gaps_inner }}
{% endif %}
{% if sway_gaps_outer is defined %}
gaps outer {{ sway_gaps_outer }}
{% endif %}
{% if sway_gaps_smart_borders is defined %}
smart_borders {{ 'on' if sway_gaps_smart_borders else 'off' }}
{% endif %}
{% if sway_gaps_smart_gaps is defined %}
smart_gaps {{ 'on' if sway_gaps_smart_gaps else 'off' }}
{% endif %}

# Colors
client.focused {{ sway_colors.focused.border }} {{ sway_colors.focused.background }} {{ sway_colors.focused.text }} {{ sway_colors.focused.indicator }} {{ sway_colors.focused.child_border }}
client.focused_inactive {{ sway_colors.inactive.border }} {{ sway_colors.inactive.background }} {{ sway_colors.inactive.text }} {{ sway_colors.inactive.indicator }} {{ sway_colors.inactive.child_border }}
client.unfocused {{ sway_colors.inactive.border }} {{ sway_colors.inactive.background }} {{ sway_colors.inactive.text }} {{ sway_colors.inactive.indicator }} {{ sway_colors.inactive.child_border }}
client.urgent {{ sway_colors.urgent.border }} {{ sway_colors.urgent.background }} {{ sway_colors.urgent.text }} {{ sway_colors.urgent.indicator }} {{ sway_colors.urgent.child_border }}
client.placeholder {{ sway_colors.inactive.border }} {{ sway_colors.inactive.background }} {{ sway_colors.inactive.text }} {{ sway_colors.inactive.indicator }} {{ sway_colors.inactive.child_border }}
client.background {{ sway_colors.background }}

# Font
{% if sway_font is defined %}
font {{ sway_font }}
{% endif %}

# Workspace keybindings
{% if sway_workspaces %}
{% for workspace in sway_workspaces %}
bindsym $mod+{{ workspace.number }} workspace number {{ workspace.number }}{% if workspace.output is defined %} output {{ workspace.output }}{% endif %}
bindsym $mod+Shift+{{ workspace.number }} move container to workspace number {{ workspace.number }}{% if workspace.output is defined %} output {{ workspace.output }}{% endif %}
{% endfor %}
{% else %}
# Default workspace keybindings (1-10)
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10
{% endif %}

# Custom keybindings
{% if sway_keybindings %}
{% for binding in sway_keybindings %}
bindsym {{ binding.keys }} {{ binding.command }}
{% endfor %}
{% else %}
# Default keybindings
bindsym $mod+Return exec $term
bindsym $mod+Shift+q kill
bindsym $mod+d exec $menu
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit' --background ffaa00 --border ffaa00 --text 1c1c1c --button-background 3a3a3a --button-text 999999 --border-bottom-size 2 --message-padding 12 --button-padding 6
# bindsym $mod+Shift+r restart
bindsym $mod+l exec swaylock --image {{ sway_image_lock }} --scaling fill
# bindsym $mod+semicolon focus right
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right
bindsym $mod+Shift+j move left
bindsym $mod+Shift+k move down
bindsym $mod+Shift+l move up
bindsym $mod+Shift+semicolon move right
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
bindsym $mod+b split h
bindsym $mod+v split v
bindsym $mod+f fullscreen toggle
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split
bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle
bindsym $mod+a focus parent
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show
bindsym $mod+r mode "resize"
{% endif %}

# Mode keybindings
{% if sway_modes %}
{% for mode in sway_modes %}
mode "{{ mode.name }}" {
{% if mode.keybindings %}
{% for binding in mode.keybindings %}
    bindsym {{ binding.keys }} {{ binding.command }}
{% endfor %}
{% endif %}
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
{% endfor %}
{% else %}
# Default resize mode
mode "resize" {
    bindsym Left resize shrink width 10 px or 10 ppt
    bindsym Down resize grow height 10 px or 10 ppt
    bindsym Up resize shrink height 10 px or 10 ppt
    bindsym Right resize grow width 10 px or 10 ppt
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
{% endif %}

# Window attributes
{% if sway_windows_attributes is defined %}
{% for marking, rules in sway_windows_attributes.items() %}
{% for rule in rules %}
{% if rule.floating is defined and rule.floating %}
for_window [{{ rule.criteria }}] mark {{ marking }}, floating enable
{% else %}
for_window [{{ rule.criteria }}] mark {{ marking }}
{% endif %}
{% if rule.workspace is defined and rule.workspace|int != 0 %}
assign [{{ rule.criteria }}] workspace number {{ rule.workspace }}
{% endif %}
{% endfor %}
{% endfor %}
{% endif %}

# Window commands
{% if sway_window_commands %}
{% for window_cmd in sway_window_commands %}
for_window [{{ window_cmd.criteria }}] {{ window_cmd.command }}
{% endfor %}
{% endif %}

# Floating windows
floating_modifier $mod
floating_minimum_size 75 x 50
floating_maximum_size -1 x -1

# Exec commands (startup applications)
{% if sway_exec_commands %}
{% for exec_cmd in sway_exec_commands %}
exec {{ exec_cmd.command }}
{% endfor %}
{% endif %}

# Focus wrapping
{% if sway_focus_wrapping is defined %}
focus_wrapping {{ 'yes' if sway_focus_wrapping else 'no' }}
{% endif %}

# Focus on window activation
{% if sway_focus_on_window_activation is defined %}
focus_on_window_activation {{ 'smart' if sway_focus_on_window_activation == 'smart' else ('urgent' if sway_focus_on_window_activation == 'urgent' else 'none') }}
{% endif %}

# Mouse warping
{% if sway_mouse_warping is defined %}
mouse_warping {{ 'output' if sway_mouse_warping == 'output' else 'container' if sway_mouse_warping == 'container' else 'none' }}
{% endif %}

# Popup during fullscreen
{% if sway_popup_during_fullscreen is defined %}
popup_during_fullscreen {{ 'smart' if sway_popup_during_fullscreen == 'smart' else ('ignore' if sway_popup_during_fullscreen == 'ignore' else 'leave_fullscreen') }}
{% endif %}

# Workspace auto back and forth
{% if sway_workspace_auto_back_and_forth is defined %}
workspace_auto_back_and_forth {{ 'yes' if sway_workspace_auto_back_and_forth else 'no' }}
{% endif %}

# Workspace layout
{% if sway_workspace_layout is defined and sway_workspace_layout is not none and sway_workspace_layout != '' %}
workspace_layout {{ sway_workspace_layout }}
{% endif %}

# Default orientation
{% if sway_default_orientation is defined and sway_default_orientation is not none and sway_default_orientation != '' %}
default_orientation {{ sway_default_orientation }}
{% endif %}

# Default floating size
{% if sway_default_floating_size is defined and sway_default_floating_size is not none and sway_default_floating_size != '' %}
default_floating_size {{ sway_default_floating_size }}
{% endif %}

# Default floating position center (not a valid sway command - removed)
# default_floating_position_center is not supported in sway 1.10+
{% if false and sway_default_floating_position_center is defined %}
default_floating_position_center {{ 'yes' if sway_default_floating_position_center else 'no' }}
{% endif %}

# Xwayland configuration
{% if sway_xwayland_disable is defined and sway_xwayland_disable %}
xwayland disable
{% elif sway_force_xwayland is defined and sway_force_xwayland %}
xwayland force
{% endif %}

# # Xwayland scale
# {% if sway_xwayland_scale is defined %}
# xwayland scale {{ sway_xwayland_scale }}
# {% endif %}
# 
# # Xwayland scale filter
# {% if sway_xwayland_scale_filter is defined %}
# xwayland scale_filter {{ sway_xwayland_scale_filter }}
# {% endif %}

# Title format
{% if sway_title_format is defined and sway_title_format is not none and sway_title_format != '' %}
title_format {{ sway_title_format }}
{% endif %}

# Title align (not a valid sway command - removed)
# title_align is not supported in sway
{% if false and sway_title_align is defined %}
title_align {{ sway_title_align }}
{% endif %}

# Include files
{% if sway_includes %}
{% for include_file in sway_includes %}
include {{ include_file }}
{% endfor %}
{% endif %}
include '$(/usr/libexec/sway/layered-include "/usr/share/sway/config.d/*.conf" "/etc/sway/config.d/*.conf" "${XDG_CONFIG_HOME:-$HOME/.config}/sway/config.d/*.conf")'
